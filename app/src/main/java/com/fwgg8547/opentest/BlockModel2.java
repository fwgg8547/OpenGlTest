package com.fwgg8547.opentest;

import java.util.List;
import java.util.ArrayList;
import java.util.*;

public class BlockModel2 extends SpriteBaseModel
{
	private static final String TAG = "BlockModel2";
	private int numActive =0;

	public BlockModel2(){
		mBlocks = new ArrayList<Item>();
	}
	
	public void initialize(TreeManager tree,int offset, int num, ModelGroup mg){
		mIndexCount =0;
		numActive =0;
		mCollisionTree = tree;
		mDeletedItemMap = new HashMap<Integer, Item>();
		mDeletedIndex = new Integer[num];
		
		for(int i=0; i<num; i++){
			Sprite s = new Sprite(offset+i);
			Item it = new Item();
			it.mId = offset+i;
			it.setSprite(s);
			it.setPosition(50.0f + i*200, 1600.0f, 0.0f, 0.0f);
			mBlocks.add(it);
		}
		
	}

	@Override
	public void onUpdate()
	{
		// delete item
		for(int i=0,n=mBlocks.size();i<n;i++){
			Item itm = mBlocks.get(i);
			if(itm.mIsDeleted){
				refreshTree(itm);
				//
				/*
				Item tmp = mBlocks.get(numActive);
				mBlocks.set(numActive, itm);
				mBlocks.set(i, tmp);
				numActive++;
				//.remove();
				*/
			}
		}
	}
}
